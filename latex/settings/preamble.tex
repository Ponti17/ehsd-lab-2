\documentclass[10pt,a4paper]{article} % Document class

%%% General packages
\usepackage[normalem]{ulem} % Strike-through text
\usepackage{makecell} % For making cells in tables
\usepackage{array} % For tables
\usepackage{wallpaper} % For adding wallpapers or background
\usepackage{tocloft} % Custom table of contents
\usepackage{lipsum} % Dummy text for testing
\usepackage{wrapfig} % Wrap text around figures
\usepackage[toc,page]{appendix} % For appendices
\usepackage{titlesec} % Custom section titles
\usepackage{fancyhdr} % Custom headers/footers
\usepackage{lastpage} % For referencing the last page
\usepackage{pdfpages} % For including PDFs
\usepackage{layout} % Page layout
\usepackage{geometry} % Custom page geometry
\geometry{a4paper, total={170mm,237mm}, left=38mm, right=38mm, top=25.4mm, bottom=25.4mm}
\usepackage{amssymb} % Black square, symbols
\usepackage{verbatim} % Multiline comments
\usepackage{multirow, multicol} % For multi-row and multi-column tables
\usepackage{tabularx, threeparttable} % For enhanced tables
\usepackage{amsmath} % For advanced math typesetting
\usepackage{siunitx} % For SI units
\usepackage{float} % For forcing float positions
\usepackage{changepage} % To change page layout within the document
\usepackage{booktabs}

\usepackage{footnote} % Fixes footcite in captions
\makesavenoteenv{figure}

%%% Language and encoding
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc} % Input encoding
\usepackage[english]{babel} % Language settings
\usepackage{csquotes} % Proper quoting
\usepackage[style=verbose]{biblatex} % Bibliography
\addbibresource{settings/bibliography.bib}

%%% Plotting and graphics
\usepackage{pgfplots} % Plot package
\pgfplotsset{compat=1.18} % PGFPlots compatibility
\usepackage{graphicx} % For graphics
\graphicspath{{imgs/}} % Graphics path

%%% Subfiles for modular document
\usepackage{subfiles}

%%% Circuit drawing and subfigures
\usepackage{caption}
\usepackage{subcaption} % For subfigures
\usepackage{rotating} % For rotated elements

%%% Hyperref for hyperlinks
\usepackage[hidelinks]{hyperref} % Hide link borders
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    citecolor=black,
    urlcolor=blue
}

%%% NO section numbering in page head
\renewcommand{\sectionmark}[1]{\markboth{#1}{}}
\renewcommand{\subsectionmark}[1]{\markright{#1}}
\newcommand{\solution}{
    \subsubsection*{Solution}
    \vspace{-5pt}
    \titlerule[0.4pt]
    \vspace{10pt}
}

%%% Headers and footers
\fancypagestyle{fancy}{
    \fancyfoot{}
    \fancyfoot[R]{Page \thepage\ of~\pageref{LastPage}}
    \fancyfoot[L]{Aarhus University}
    \fancyhead{}
    \fancyhead[L]{\nouppercase\rightmark}
    \fancyhead[R]{\nouppercase\leftmark}
    \renewcommand{\footrulewidth}{0pt}
}

\fancypagestyle{plain}{%
  \fancyhf{}%
  \fancyfoot[R]{Page \thepage\ of~\pageref{LastPage}}
  \fancyfoot[L]{Aarhus University}
}

\fancypagestyle{roman}{%
  \fancyhf{}%
  \fancyfoot[R]{\thepage}
  \fancyfoot[L]{Aarhus University}
}

%%% Table of Contents and Titles
\AtBeginDocument{\addtocontents{toc}{\protect\thispagestyle{roman}}}
\renewcommand{\headrulewidth}{0pt}

%%% Equation and figure numbering by section
\numberwithin{equation}{section}
\numberwithin{figure}{section}

%%% Itemize spacing
\usepackage{enumitem}
\setlist[itemize]{itemsep=1pt, topsep=2pt}

%%% Color and formatting
\usepackage{color}
\newcommand{\hsp}{\hspace{20pt}}
\definecolor{gray75}{gray}{0.75}

%%% Section title formatting
%%% NO section numbering
\titleformat{\section}
    {\normalfont\Large\bfseries}
    {}
    {0.0em}
    {}

%%% NO section numbering
\titleformat{\subsection}
    {\normalfont\normalsize\bfseries}
    {}
    {0.0em}
    {}

%%% NO section numbering
\titleformat{\subsubsection}
{\normalfont\normalsize\bfseries}
{}
{0.0em}
{}

%%% Spacing before and after sections
\titlespacing*{\section}{0pt}{12pt}{12pt}
\titlespacing*{\subsection}{0pt}{12pt}{12pt}

%%% Captions
\captionsetup{labelfont=bf}
\setlength{\abovecaptionskip}{5pt} % Reduce space above captions

%%% Footnotes
\usepackage[bottom]{footmisc}

%%% No paragraph indentation
\setlength\parindent{0pt} 

%%% Front page and titling
\usepackage{titling}

%%% Miscellaneous math and symbols
\DeclareMathSymbol{*}{\mathbin}{symbols}{"01}

%%% Reference all citations
\nocite{*}